@use "@/styles/ui";

$accent: var(--accent);
$text: var(--text);
$border: var(--border);
$surface: var(--surface);
$shadow1: var(--shadow-1);

/* one source of truth for title & meta size */
$heading-size: clamp(1.05rem, 1.6vw, 1.25rem);

.portfolio {
  @include ui.card(20px, 1.5rem);
  max-width: 900px;
  margin: 1.25rem auto 0;

  @media (min-width: 640px) { padding: 1.75rem 2rem; }

  &__header { margin-bottom: .75rem; }

  &__title {
    font-size: clamp(1.4rem, 3.2vw, 2rem);
    font-weight: 800;
    margin: 0 0 .25rem;
    letter-spacing: .2px;
    line-height: 1.05;
  }

  &__subtitle {
    margin: 0 0 .9rem;
    color: $text;
    font-size: 1rem;
  }

  &__grid {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 1rem;

    @media (min-width: 720px) {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  &__item.is-wide {
    @media (min-width: 720px) { grid-column: span 2; }
  }
}

.project-card {
  background: $surface;
  border: 0;
  border-radius: 16px;
  padding: 1rem;
  display: grid;
  gap: .7rem;
  box-shadow: $shadow1;
  color: $text;

  &:focus-within {
    outline: 2px solid $accent;
    outline-offset: 2px;
  }

  &__head {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: .75rem;
  }

  &__title {
    margin: 0;
    font-size: $heading-size;
    font-weight: 700;
    letter-spacing: .2px;
    color: $accent;

    a {
      color: inherit;
      text-decoration: none;
      border-bottom: 1px solid transparent;

      &:hover,
      &:focus-visible {
        border-bottom-color: $accent;
        outline: none;
      }
    }
  }

  &__meta {
    margin: 0;
    white-space: nowrap;
    font-size: $heading-size;
    font-weight: 700;
    letter-spacing: .2px;
    color: $accent;
  }

  &__summary {
    margin: 0;
    font-size: 1rem;
    line-height: 1.6;
    color: $text;
  }

  &__highlights {
    list-style: disc;
    padding-left: 1.1rem;
    margin: 0;
    color: $text;

    li { margin: .2rem 0; }
  }

  &__tags {
    display: flex;
    flex-wrap: wrap;
    gap: .4rem;
  }

  &__links {
    margin: .2rem 0 0;
    display: flex;
    align-items: center;
    gap: .5rem;
  }
}

.project-card__links .btn.btn--ghost,
.project-card__links .btn.btn--ghost:visited,
.project-card__links .btn.btn--ghost:focus,
.project-card__links .btn.btn--ghost:hover {
  color: var(--accent);
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
}

.project-card__links .btn.btn--ghost:hover { border-color: var(--accent); }

.project-card__tags .pill,
.project-card__tags .tag {
  color: var(--accent);
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
  background: color-mix(in srgb, var(--accent) 10%, transparent);
}

@media print {
  .portfolio {
    margin-top: .5rem;
    padding: 0;
    background: transparent;
    border: 0;
    box-shadow: none;
  }

  .project-card { break-inside: avoid; page-break-inside: avoid; }

  .project-card__links a[href^="http"]::after { content: " (" attr(href) ")"; }
}
